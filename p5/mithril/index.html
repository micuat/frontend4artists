<!DOCTYPE html>
<html lang="en">

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  <script src="https://unpkg.com/mithril/mithril.js"></script>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      font-size: 18pt;
      font-family: sans-serif;
    }

    canvas {
      display: block;
    }
  </style>
  <meta charset="utf-8" />

</head>

<body>
  <div>
  </div>
  <p><a target="_blank" href="https://github.com/micuat/frontend4artists/blob/main/p5/mithril/index.html">open code</a></p>

  <script>
    let message = "hi from mithrilðŸ‘‹";
    let r = 0;

    const Hello = {
      view: function () {
        return m("main", [
          m("h1", { class: "title" }, "p5 with Mithril!"),
          m(
            "input[type=text]",
            {
              oninput: function (e) { message = e.target.value },
              value: message
            },
          ),
          m(
            "input[type=range]",
            {
              oninput: function (e) { r = e.target.value },
              value: r,
              min: 0,
              max: 255
            },
          ),
          m("div#p5container"),
        ]);
      },
    };

    const root = document.querySelector("div");
    m.mount(root, Hello);

    function setup() {
      createCanvas(400, 400).parent(select("#p5container"));
    }

    function draw() {
      background(parseInt(r));
      fill(255 - parseInt(r));
      textSize(25)
      textAlign(CENTER, CENTER)
      translate(width / 2, (millis() * 0.1) % height)
      rotate(sin(millis() * 0.004) * 0.2)
      text(message, 0, 0);
    }
  </script>
</body>

</html>